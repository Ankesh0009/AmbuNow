<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Track Ambulance - AmbuNow</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Tailwind's slate-50 */
        }
        /* Pulsing animation for the ambulance marker */
        @keyframes pulse-strong {
            0%, 100% { transform: scale(1); box-shadow: 0 0 0 0 rgba(220, 38, 38, 0.7); }
            50% { transform: scale(1.05); box-shadow: 0 0 0 20px rgba(220, 38, 38, 0); }
        }
        .animate-pulse-strong {
            animation: pulse-strong 2s infinite;
        }
        /* Flashing background animation for status updates */
        @keyframes flash-bg {
            from { background-color: #fef2f2; } /* red-50 */
            to { background-color: white; }
        }
        .flash-update {
            animation: flash-bg 1.2s ease-out;
        }
    </style>
</head>
<body class="text-gray-800">

    <a href="tel:108" title="Call Emergency: 108" class="fixed bottom-6 right-6 bg-red-600 text-white w-16 h-16 rounded-full flex items-center justify-center shadow-2xl hover:bg-red-700 transition-all duration-300 transform hover:scale-110 z-50">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-7 w-7" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z" /></svg>
        <span class="sr-only">Call Emergency</span>
    </a>

    <nav class="bg-white/90 backdrop-blur-md shadow-sm sticky top-0 z-40">
        <div class="container mx-auto px-6 py-4">
            <div class="flex justify-between items-center">
                <a href="/" class="text-3xl font-bold text-gray-900">Ambu<span class="text-red-600">Now</span></a>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="/" class="text-gray-600 hover:text-red-600 transition-colors duration-300">Home</a>
                    <a href="/request" class="text-gray-600 hover:text-red-600 transition-colors duration-300">Request</a>
                    <a href="#" class="font-semibold text-red-600">Track</a>
                    <a href="#" class="text-gray-600 hover:text-red-600 transition-colors duration-300">Contact</a>
                </div>
                <div class="md:hidden">
                    <button class="text-gray-600 focus:outline-none">
                        <svg class="w-7 h-7" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                    </button>
                </div>
            </div>
        </div>
    </nav>

    <main class="container mx-auto px-4 py-10">
        <div class="max-w-4xl mx-auto">
            
            <div class="text-center mb-8">
                <h1 class="text-4xl md:text-5xl font-extrabold text-gray-900">Track Your Ambulance</h1>
                <p class="mt-3 text-lg text-gray-600">Help is on its way. Stay calm and monitor the live location below.</p>
            </div>

            <div class="relative w-full h-80 md:h-[450px] bg-slate-200 rounded-2xl shadow-lg overflow-hidden border-4 border-white">
                <img src="https://images.unsplash.com/photo-1572455152148-51c6a22cbc86?q=80&w=2574&auto=format&fit=crop" alt="Map background of a city" class="w-full h-full object-cover">
                
                <div class="absolute" style="top: 75%; left: 80%;">
                    <div class="flex flex-col items-center -translate-x-1/2 -translate-y-1/2">
                        <div class="p-2 bg-blue-500 rounded-full shadow-xl">
                           <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd" /></svg>
                        </div>
                        <span class="mt-2 text-xs font-bold bg-white/80 backdrop-blur-sm px-2 py-1 rounded-md shadow">Your Location</span>
                    </div>
                </div>

                <div id="ambulance-marker" class="absolute transition-all duration-1000 ease-linear" style="top: 25%; left: 25%;">
                     <div class="flex flex-col items-center -translate-x-1/2 -translate-y-1/2">
                        <div class="p-3 bg-red-600 rounded-full shadow-xl animate-pulse-strong">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2"><path d="M9 17a2 2 0 11-4 0 2 2 0 014 0zM19 17a2 2 0 11-4 0 2 2 0 014 0z" /><path stroke-linecap="round" stroke-linejoin="round" d="M13 16V6a1 1 0 00-1-1H4a1 1 0 00-1 1v10l2 2h8a1 1 0 001-1zM2 12h11" /></svg>
                        </div>
                    </div>
                </div>
            </div>

            <div id="status-card" class="relative bg-white rounded-2xl shadow-xl mx-auto max-w-2xl mt-[-4rem] z-10 overflow-hidden">
                <div class="w-full bg-gray-200 h-2.5">
                    <div id="progress-bar" class="bg-red-500 h-2.5 rounded-r-full transition-all duration-1000 ease-out" style="width: 20%"></div>
                </div>

                <div class="p-6 md:p-8">
                    <div class="flex justify-between items-center">
                        <div>
                            <p class="text-sm font-medium text-gray-500">Estimated Arrival In</p>
                            <p id="eta" class="text-4xl md:text-5xl font-extrabold text-red-600">12 MINS</p>
                        </div>
                        <div class="text-right">
                           <p class="text-sm font-medium text-gray-500">Current Status</p>
                           <p id="status" class="text-xl font-bold text-green-600 flex items-center gap-2">
                               <span class="relative flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 bg-green-500"></span></span>
                               On the Way
                           </p>
                        </div>
                    </div>
                    
                    <hr class="my-6">
                    
                    <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4">
                         <div class="flex items-center gap-4">
                             <img src="https://i.pravatar.cc/64?u=driver1" alt="Driver" class="w-14 h-14 rounded-full border-2 border-red-200">
                             <div>
                                <p class="font-bold text-lg text-gray-800">Ravi Kumar</p>
                                <p class="text-sm text-gray-500">Ambulance: MH 12 AB 3456</p>
                            </div>
                         </div>
                         <a href="tel:9876543210" class="w-full sm:w-auto flex items-center justify-center gap-2 bg-red-500 text-white font-bold py-3 px-6 rounded-lg hover:bg-red-600 transition-colors duration-300">
                             <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" viewBox="0 0 20 20" fill="currentColor"><path d="M2 3a1 1 0 011-1h2.153a1 1 0 01.986.836l.74 4.435a1 1 0 01-.54 1.06l-1.518.76a11.034 11.034 0 006.364 6.364l.76-1.518a1 1 0 011.06-.54l4.435.74a1 1 0 01.836.986V17a1 1 0 01-1 1h-2C7.82 18 2 12.18 2 5V3z" /></svg>
                             Call Driver
                         </a>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script>
        // --- Live Tracking Simulation Script ---
        document.addEventListener('DOMContentLoaded', () => {
            const etaEl = document.getElementById('eta');
            const statusEl = document.getElementById('status');
            const progressBarEl = document.getElementById('progress-bar');
            const ambulanceMarkerEl = document.getElementById('ambulance-marker');
            const statusCardEl = document.getElementById('status-card');

            const updates = [
                { eta: '8 MINS', statusText: 'On the Way', progress: '55%', markerPos: { top: '40%', left: '55%' } },
                { eta: '3 MINS', statusText: 'Nearby', progress: '85%', markerPos: { top: '60%', left: '70%' } },
                { eta: '<1 MIN', statusText: 'Arriving Now', progress: '95%', markerPos: { top: '70%', left: '76%' } },
                { eta: '0 MINS', statusText: 'Arrived', progress: '100%', markerPos: { top: '75%', left: '80%' } },
            ];

            let currentUpdateIndex = 0;

            function applyUpdate() {
                if (currentUpdateIndex >= updates.length) return;

                const update = updates[currentUpdateIndex];
                
                // Update text content
                etaEl.textContent = update.eta;
                statusEl.innerHTML = `<span class="relative flex h-3 w-3"><span class="animate-ping absolute inline-flex h-full w-full rounded-full ${update.statusText === 'Arrived' ? 'bg-blue-400' : 'bg-green-400'} opacity-75"></span><span class="relative inline-flex rounded-full h-3 w-3 ${update.statusText === 'Arrived' ? 'bg-blue-500' : 'bg-green-500'}"></span></span> ${update.statusText}`;

                // Update progress bar
                progressBarEl.style.width = update.progress;
                
                // Update ambulance marker position
                ambulanceMarkerEl.style.top = update.markerPos.top;
                ambulanceMarkerEl.style.left = update.markerPos.left;

                // Add a flash animation to the card to show an update happened
                statusCardEl.classList.remove('flash-update');
                void statusCardEl.offsetWidth; // Trigger reflow to restart animation
                statusCardEl.classList.add('flash-update');

                if (update.statusText === 'Arrived') {
                    statusEl.classList.remove('text-green-600');
                    statusEl.classList.add('text-blue-600');
                    progressBarEl.classList.remove('bg-red-500');
                    progressBarEl.classList.add('bg-blue-500');
                }
                
                currentUpdateIndex++;
            }

            // Simulate updates every 5 seconds
            setInterval(applyUpdate, 5000);
        });
    </script>
</body>
</html>